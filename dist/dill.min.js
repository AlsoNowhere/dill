!function(){"use strict";var t=function(t){console.log("%c "+t+"%c - Generated from logger service","color:red;","color:grey;")},e=function(t){console.warn(t)},n=function(e,n,o){if("string"!=typeof e)throw t("You must pass a string as the name of the component."),new Error("You must pass a string as the name of the component.");if(e.indexOf("\n")>-1)throw t("You can not put line breaks in the component name."),new Error("You can not put line breaks in the component name.");if("string"!=typeof n)throw t("You must pass a string as the template of the component."),new Error("You must pass a string as the template of the component.");if(o&&!(o instanceof Module))throw t("You must pass an instance of Module for the module, or leave undefined."),new Error("You must pass an instance of Module for the module, or leave undefined.");this.name=e,this.template=n},o=function(e){if(!(e instanceof Function))throw t("You must pass a constructor function to the .setComponent method on a dill module."),new Error("You must pass a constructor function to the .setComponent method on a dill module.");if(!(e.prototype instanceof n))throw t("You must use an instance of ComponentPrototype for the constructor function prototype."),new Error("You must use an instance of ComponentPrototype for the constructor function prototype.");this.components[e.prototype.name]=e},i=function(t){return Object.seal(t),Object.freeze&&Object.freeze(t),t},r=function(t,e){for(var n,o=0;o<t.length&&!1!==(n=e(t[o],o));)"number"==typeof n&&(o+=n),o++},a=function(t,e){for(var n,o=t.length-1;o>=0&&!1!==(n=e(t[o],o));)"number"==typeof n&&(o-=n),o--},s=function(){var t=function(e,n){var o=this;void 0===n&&(n=[]),n=n.filter(function(e){return e instanceof t}),this.name=e,this.components={},this.services={},r(n,function(e){e instanceof t&&Object.keys(e.components).forEach(function(t){var n=e.components[t];n.isIsolated||(o.components[t]=n)})}),i(this)};return t.prototype={setComponent:o},t}(),u=function(t,e){this.targetElement=t,this.dillTemplate=e},f=[],l=function(t,e){var n=t.split("{{");return r(n,function(t,o){var i=t.indexOf("}}");n[o]=-1===i?t:function(t,e){var n=e[t];return void 0===n&&(n=""),"'"===t.substr(0,1)&&"'"===t.substr(t.length-1,1)?t.substring(1,t.length-1):"function"==typeof n?n.apply(e):n}(t.substring(0,i),e)+t.substring(i+2,t.length)}),n.join("")},d=["value","checked"],c=function(t,e){t.component&&t.data.hasOwnProperty(e)&&"function"==typeof t.data[e]&&t.data[e](),t.children&&r(t.children,function(t){c(t,e)})},p=function(t,e,n){var o=function(){for(var o in t)(function(){var e=t[o];Object.defineProperty(this,o,{get:function(){return e},set:function(t){e=t}})}).apply(this);null===e||n||(this._parent=e)};return null===e||n||(o.prototype=e),new o},h=function(t,e,n){return void 0===n&&(n=e),t.substr(0,e.length)===e&&t.substr(t.length-n.length,t.length)===n};const m=function(t){const e=t.prototype;this.name=e.name,this.template=e.template,e.module&&(this._module=e.module),t.prototype={},this.baseData=new t};var v=function(t,e,n,o){if(this.name=t.nodeName,this.module=n,o&&(this.templateParent=o),"#text"===this.name)return this.value=t.nodeValue,this.data=e,i(this);this.children=[];var a=n.components[this.name.toLowerCase()];if(a&&(a=new m(a)),void 0!==a)return this.component=a,t.hasAttribute("dill-for")?void(this.data=e):(this.data=p(a.baseData,e,!!t.hasAttribute("dill-isolate")),t.removeAttribute("dill-isolate"),void r(t.attributes,function(t){var n,o=t.nodeName,i=t.nodeValue;h(o,"[","]")?(n=o.substring(1,o.length-1),Object.defineProperty(this.data,n,{get:function(){return e[i]},set:function(t){e[i]=t}})):this.data[o]=h(i,"'")?i.substring(1,i.length-1):data[i]}.bind(this)));this.attributes=[],this.data=e},b=function(t){return":"===t.substr(0,1)},g=function(t){return":"===t.substr(t.length-1,1)},y=function(t,n,o){this.name=o.nodeName;var r,a=o.nodeValue;if("#"===this.name.substr(0,1))return n.data[this.name.substring(1)]=t,void(this.type="hashReference");if(r=b(this.name)?this.name.substring(1,this.name.length):g(this.name)?this.name.substring(0,this.name.length-1):this.name.substring(1,this.name.length-1),this.type=function(t){var e=t.nodeName;return h(e,"[","]")||b(e)?"bind":h(e,"(",")")||g(e)?"event":"default"}(o),this.value="literal"===this.type?a.substring(1,a.length-1):a,"default"!==this.type&&(this.parsed=r),a=this.value,"event"===this.type){var s=n.data[a];return s instanceof Function||e("Event "+this.parsed+" property is not a function, nothing will be run."),void t.addEventListener(this.parsed,function(t){void 0!==s&&(!1!==s.apply(n.data,[t,this])&&dill.change())})}i(this)},w=function(t,e){var n=t.attributes["dill-template"].nodeValue,o=e.data[n];t.innerHTML="function"==typeof o?o.apply(e.data):o,t.removeAttribute("dill-template")},E=function(t,e){var n=e.data[t.attributes["dill-extends"].nodeValue];t.removeAttribute("dill-extends"),"object"==typeof n&&Object.keys(n).forEach(function(e){var o=e;h(e,"[","]")&&(o=":"+e.substring(1,e.length-1)),h(e,"(",")")&&(o=e.substring(1,e.length-1)+":"),t.setAttribute(o,n[e])})},Y=function(t,e){var n=t.attributes["dill-if"].nodeValue,o="!"===n.substr(0,1);o&&(n=n.substring(1,n.length));var i="function"==typeof e.data[n]?e.data[n]():e.data[n];return o&&(i=!i),e.if={parent:t.parentNode,first:i,initial:!0,value:n,invert:o,target:t},t.removeAttribute("dill-if"),i},A=function(t,e){var n=t.attributes["dill-for"].nodeValue;e.for={parent:t.parentNode,initial:[null],templates:[null],value:n,first:!0},t.removeAttribute("dill-for"),e.for.clone=t.cloneNode(!0)},N=function(e,n,o,i){var s,u=new v(e,n,o,i),f=u.data;return"SCRIPT"===u.name?u:(e.attributes&&e.attributes["dill-extends"]&&E&&E(e,u),e.attributes&&e.attributes["dill-if"]&&Y&&Y(e,u),e.attributes&&a(e.attributes,function(t){if(u.if||"dill-template"!==t.nodeName)return!u.if&&"dill-for"===t.nodeName&&A?A(e,u):void(!u.component&&u.attributes.push(new y(e,u,t)))}),u.attributes&&a(u.attributes,function(t,n){"event"!==t.type&&"hashReference"!==t.type||u.attributes.splice(n,1),"default"!==t.type&&e.removeAttribute(t.name)}),u.if&&!1===u.if.first?u:(e.attributes&&e.attributes["dill-template"]&&w&&w(e,u),u.component&&((u.for?u.for.first:u.for)||(f._template=e.innerHTML,e.innerHTML=u.component.template,s=e.getElementsByTagName(u.component.name.toUpperCase()),r(s,function(n){for(var o=!1,i=n;i!==e&&!o;)o=i.hasAttribute("dill-if"),i=i.parentNode;if(!o)throw t("Recursive element detected without conditional catch. To avoid infinite loop render was stopped."),new Error("Recursive element detected without conditional catch. To avoid infinite loop render was stopped.")}))),(u.for?u.for.first:u.for)||e.childNodes&&r(e.childNodes,function(t){u.children.push(N(t,f,o,u))}),u.for&&(u.for.first=!1),u.component&&f.hasOwnProperty("oninit")&&f.oninit(),u))},C=function(t,e){var n,o=e.data,i=e.if.invert,a=e.if.value,s="function"==typeof o[a]?o[a]():o[a],u=e.if.initial,f=i?!s:!!s,l=e.if.parent;return!1===u&&!1===f?0:!1===u&&!0===f?(void 0===t?l.appendChild(e.if.target):l.insertBefore(e.if.target,t),!1===e.if.first?(e.if.first=!0,e.if.target.attributes&&e.if.target.attributes["dill-template"]&&w(e.if.target,e),e.component&&(e.data._template=e.if.target.innerHTML,e.if.target.innerHTML=e.component.template,n=e.if.target.getElementsByTagName(e.component.name.toUpperCase()),r(n,function(t){for(var n=!1,o=t;o!==e.if.target&&!n;)n=o.hasAttribute("dill-if"),o=o.parentNode;if(!n)throw new Error("Recursive element detected without conditional catch. To avoid infinite loop render was stopped.")}),e.data.hasOwnProperty("oninit")&&e.data.oninit()),e.if.target.childNodes&&r(e.if.target.childNodes,function(t){e.children.push(N(t,e.data,e.data._module,e))})):c(e,"oninit"),e.if.initial=!0,"added"):!0===u&&!1===f?(l.removeChild(e.if.target),c(e,"onremove"),e.if.initial=!1,0):void 0},O=function(t,e){var n;for(n in t)e.hasOwnProperty(n)?e[n]=t[n]:function(){var o;Object.defineProperty(e,n,{get:function(){return o},set:function(t){o=t}}),e[n]=t[n]}();for(n in e)"_"!==n.substr(0,1)&&(t.hasOwnProperty(n)||delete e[n])};const T=function(t){if(void 0!==t){var e=[{name:"noIf",type:"bool"},{name:"noFor",type:"bool"},{name:"parent",type:"object"}];Object.keys(t).forEach(function(n){var o=e.filter(function(t){return t.name===n}),i=t[n];1===o.length&&t[n]&&(this[n]="bool"===o[0].type?!!i:i)}.bind(this))}};var x=function(e,n,o,i){var a,s,u,f,h,v,b=n.name,g="boolean"==typeof o&&o,y=function(){o=!0,g=!0};if(i instanceof T||(i=new T),"boolean"!=typeof o&&(o instanceof Element&&o===e?y():!(o instanceof Element)&&o instanceof Object&&n.component instanceof m&&n.component.baseData instanceof o&&y()),"#comment"===b||"SCRIPT"===b)return 1;if("#text"===b)return!0===g&&function(t,e){var n=t.nodeValue,o=l(e.value,e.data);n!==o&&(t.nodeValue=o)}(e,n),1;if(!0===g){if(!i.noIf&&n.hasOwnProperty("if")){if("added"===(a=C(e,n)))return h=i&&i.parent&&i.parent.childNodes,x(void 0===e?h[h.length-1]:e.previousElementSibling,n,o,new T({noIf:!0})),1;if(0===a)return a}if(!i.noFor&&n.hasOwnProperty("for")&&"number"==typeof(s=function(e,n,o){var i=n.for.initial.length,r="function"==typeof n.data[n.for.value]?n.data[n.for.value]():n.data[n.for.value];if(void 0===r)throw t("Count not find "+n.for.value+" on current scope."),new Error("Count not find "+n.for.value+" on current scope.");if(!(r instanceof Array))throw t("This property: "+n.for.value+" is not an Array and therefore not iterable in a dill-for"),new Error("This property: "+n.for.value+" is not an Array and therefore not iterable in a dill-for");var a=n.for.initial,s=r.length,u=e,f=n.for.parent,l=n.for.templates,d=function(){return n.for.clone.cloneNode(!0)};return i!==s&&(i>s&&function(){for(var t,e=0;e<s;)u=u.nextElementSibling,e++;for(;e<i;)t=u.nextElementSibling,f.removeChild(u),c(n,"onremove"),u=t,e++}(),i<s&&function(){for(var t,e=0;e<i-1;)u=u.nextElementSibling,e++;if(0===i){void 0===u?(u=d(),f.appendChild(u)):(f.insertBefore(d(),u),u=u.previousElementSibling);var a=p(r[0],n.data);a._item=r[0],a._index=0,t=N(u,a,n.module,n),l[0]=t,x(u,t,o)}for(;e<s-1;)u.insertAdjacentElement("afterend",d()),u=u.nextElementSibling,function(){var t=e+1,i=p(r[t],n.data);i._item=r[t],i._index=t;var a=N(u,i,n.module,n);l[t]=a,x(u,a,o)}(),e++}()),function(){var t,h=0;for(u=e;h<(i<s?i:s);)r[h]!==a[h]?(t=u.nextSibling,f.removeChild(u),c(n,"onremove"),null===t?(f.appendChild(d()),u=f.children[f.children.length-1]):(f.insertBefore(d(),t),u=t.previousElementSibling),function(){var t=p(r[h],n.data);t._item=r[h],t._index=h;var e=N(u,t,n.module,n);l[h]=e,x(u,e,o)}(),u=u.nextElementSibling,h++):("object"==typeof r[h]&&O(r[h],l[h].data),x(u,l[h],o),u=u.nextElementSibling,h++)}(),n.for.initial=r.map(function(t){return t}),s}(e,n,o)))return s;u=e,(f=n).attributes&&r(f.attributes,function(t){var e,n=t.type,o=t.parsed||t.name,i=l(t.value,f.data),r=!!u.attributes[o];if("bind"===n){if(e="function"==typeof f.data[i]?f.data[i].apply(f.data):f.data[i],d.indexOf(o)>-1){if(u[o]===("number"==typeof e?e.toString():e))return;return void("SELECT"===u.nodeName?setTimeout(function(){u[o]=e},0):u[o]=e)}if(r){if(u.attributes[o].nodeValue===e)return;return void 0===e||!1===e?u.removeAttribute(o):void(u.attributes[o].nodeValue=e)}if(void 0===e||!1===e)return;u.setAttribute(o,e)}else if("default"===n){if(r){if(u.attributes[o].nodeValue===i)return;return void(u.attributes[o].nodeValue=i)}u.setAttribute(o,i)}})}return v=0,r(n.children,function(t,n){if(void 0!==e){var i=e.childNodes[v],r=x(i,t,o,void 0===i?new T({parent:e}):void 0);v+=r}}),1},P=function(t){r(f,function(e){e instanceof u&&x(e.targetElement,e.dillTemplate,t||!0)})};var j={render:function(e,n,o){if(!(o instanceof s))throw t("You must pass a Dill Module instance."),new Error("You must pass a Dill Module instance.");if("function"!=typeof n)throw t("You must pass a constructor function as the original Data."),new Error("You must pass a constructor function as the original Data.");if(!(e instanceof Element))throw t("You must pass a HTML element as the target."),new Error("You must pass a HTML element as the target.");var i=p(new n,null);i._module=o;var r=N(e,i,o);return i.oninit&&i.oninit(),f.push(new u(e,r)),P(),i},change:P,module:function(e,n){if("string"!=typeof e)throw t("You must pass a string as the name of the module."),new Error("You must pass a string as the name of the module.");if(n&&!(n instanceof Array))throw t("You must pass an Array or undefined for the modules argument of the module."),new Error("You must pass an Array or undefined for the modules argument of the module.");return new s(e,n)},ComponentPrototype:n,reset:function(){f.length=0}};window.dill=j}();